<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thêm sản phẩm - Rudo Watch Admin</title>

    <link rel="stylesheet" href="/src/modules/admin/styles/main.css" />
    <link rel="stylesheet" href="/src/modules/admin/styles/quill.snow.css" />
    <link rel="stylesheet" href="/src/modules/admin/styles/dropzone.min.css" />
    <link rel="stylesheet" href="/src/modules/admin/styles/select2.min.css" />
    <link rel="stylesheet" href="/src/modules/admin/styles/loadingEffect.css" />
    <link rel="icon" href="/favicon.svg" type="image/x-icon" />
  </head>

  <body data-sidebartype="">
    <!-- Preloader -->
    <div class="preloader">
      <img src="/favicon.svg" alt="loader" class="lds-ripple img-fluid" />
    </div>

    <div id="main-wrapper">
      <!-- Sidebar Start - Được inject bởi main.js -->
      <aside class="left-sidebar with-vertical" id="dashboad_sidebar"></aside>
      <!-- Sidebar End -->

      <div class="page-wrapper">
        <!-- Header Start - Được inject bởi main.js -->
        <header class="topbar" id="admin_header">
          <div class="with-vertical">
            <!-- Header component sẽ được inject vào đây -->
          </div>
        </header>
        <!-- Header End -->

        <!-- ============================================================== -->
        <!-- MAIN CONTENT - Phần nội dung riêng của từng trang -->
        <!-- ============================================================== -->
        <div class="body-wrapper">
          <div class="container-fluid">
            <!-- Breadcrumb -->
            <div
              class="card bg-info-subtle shadow-none position-relative overflow-hidden mb-4"
            >
              <div class="card-body px-4 py-3">
                <div class="row align-items-center">
                  <div class="col-9">
                    <h4 class="fw-semibold mb-8">Thêm sản phẩm</h4>
                    <nav aria-label="breadcrumb">
                      <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                          <a
                            class="text-muted text-decoration-none"
                            href="/admin/dashboard.html"
                            >Dashboard</a
                          >
                        </li>
                        <li class="breadcrumb-item" aria-current="page">
                          Sản phẩm
                        </li>
                      </ol>
                    </nav>
                  </div>
                  <div class="col-3">
                    <div class="text-center mb-n5">
                      <img
                        src="/src/assets/images/ChatBc.png"
                        alt="modernize-img"
                        class="img-fluid mb-n4"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Main Content Card -->
            <div class="row">
              <div class="col-lg-8">
                <div class="card">
                  <div class="card-body">
                    <div
                      class="d-flex justify-content-between align-items-center mb-7"
                    >
                      <h4 class="card-title">Thông tin chung</h4>

                      <button
                        class="navbar-toggler border-0 shadow-none d-md-none"
                        type="button"
                        data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasRight"
                        aria-controls="offcanvasRight"
                      >
                        <i class="ti ti-menu fs-5 d-flex"></i>
                      </button>
                    </div>
                    <form
                      action="javascript:void(0);"
                      class="form-horizontal"
                      id="product-form"
                      onsubmit="return false;"
                    >
                      <div class="mb-4">
                        <label class="form-label"
                          >Tên sản phẩm <span class="text-danger">*</span>
                        </label>
                        <input
                          type="text"
                          id="product-name"
                          name="name"
                          class="form-control"
                          placeholder="Tên sản phẩm"
                          required
                        />
                        <p class="fs-2">
                          Tên sản phẩm là bắt buộc và nên là duy nhất.
                        </p>
                      </div>
                      <div class="mb-4">
                        <label class="form-label"
                          >Mã sản phẩm <span class="text-danger">*</span>
                        </label>
                        <input
                          type="text"
                          id="product-model-code"
                          name="model_code"
                          class="form-control"
                          placeholder="Mã sản phẩm sẽ tự động tạo khi nhập tên sản phẩm"
                          required
                        />
                        <p class="fs-2 text-muted">
                          <i class="ti ti-info-circle me-1"></i>
                          Mã sản phẩm sẽ tự động tạo dựa trên tên sản phẩm và thương hiệu. Bạn có thể chỉnh sửa nếu cần.
                        </p>
                      </div>
                      <div>
                        <div class="d-flex flex-row justify-content-between align-items-center">
                          <label class="form-label">Mô tả</label>
                          <div class="d-flex align-items-center gap-1"><button type="button" class="" onclick="fillDiscriptionFromAI()" style="border: none; outline: none; background: none; text-decoration:underline;">Tạo mô tả AI</button><div class="loading_effect"></div></div>
                        </div>
                        <div id="editor" class="ql-container ql-snow">
                          <div
                            class="ql-editor ql-blank"
                            data-gramm="false"
                            contenteditable="true"
                          >
                            <p><br /></p>
                          </div>
                          <div
                            class="ql-clipboard"
                            contenteditable="true"
                            tabindex="-1"
                          ></div>
                          <div class="ql-tooltip ql-hidden">
                            <a
                              class="ql-preview"
                              rel="noopener noreferrer"
                              target="_blank"
                              href="about:blank"
                            ></a
                            ><input
                              type="text"
                              data-formula="e=mc^2"
                              data-link="https://quilljs.com"
                              data-video="Embed URL"
                            /><a class="ql-action"></a><a class="ql-remove"></a>
                          </div>
                        </div>
                        <p class="fs-2 mb-0">
                          Thêm mô tả cho sản phẩm để hiển thị tốt hơn.
                        </p>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title mb-7">Hình ảnh</h4>

                    <form
                      action="#"
                      id="main-image-dropzone"
                      class="dropzone dz-clickable mb-2"
                    >
                      <div class="dz-default dz-message">
                        <button class="dz-button" type="button">
                          Kéo thả ảnh đại diện vào đây để tải lên
                        </button>
                      </div>
                    </form>
                    <p class="fs-2 text-center mb-0">
                      Đặt ảnh đại diện cho sản phẩm. Chỉ chấp nhận file ảnh
                      *.png, *.jpg và *.jpeg.
                    </p>
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title mb-7">Ảnh thumbnail</h4>

                    <form
                      action="#"
                      id="thumbnail-dropzone"
                      class="dropzone dz-clickable mb-2"
                    >
                      <div class="dz-default dz-message">
                        <button class="dz-button" type="button">
                          Kéo thả nhiều ảnh vào đây để tải lên
                        </button>
                      </div>
                    </form>
                    <p class="fs-2 mb-0">
                      Có thể tải lên nhiều ảnh thumbnail. Chỉ chấp nhận file ảnh
                      *.png, *.jpg và *.jpeg.
                    </p>
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex flex-row justify-content-between align-items-center">
                      <h4 class="card-title mb-7">Thông số kỹ thuật</h4>
                      <div class="d-flex align-items-center gap-2">
                        <button type="button" class="" onclick="fillSpecFromAI()" style="border: none; outline: none; background: none; text-decoration:underline;">Tạo thông số bằng AI</button>
                        <button type="button" class="btn btn-sm btn-primary" onclick="generateSpecsAndVariantsWithAI()">Tạo thông số + Variants với hình ảnh</button>
                        <div class="loading_effect-2"></div>
                      </div>
                    </div>
                    <form action="">
                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label class="form-label">Kích thước</label>
                          <input
                            type="text"
                            id="spec-size"
                            name="specifications[size]"
                            class="form-control"
                            placeholder="VD: 41mm"
                          />
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Thương hiệu</label>
                          <input
                            type="text"
                            id="spec-brand"
                            name="specifications[brand]"
                            class="form-control"
                            placeholder="VD: Rolex"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label class="form-label">Model</label>
                          <input
                            type="text"
                            id="spec-model"
                            name="specifications[model]"
                            class="form-control"
                            placeholder="VD: Submariner"
                          />
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Chất liệu</label>
                          <input
                            type="text"
                            id="spec-material"
                            name="specifications[material]"
                            class="form-control"
                            placeholder="VD: Oystersteel"
                          />
                        </div>
                      </div>
                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label class="form-label">Trọng lượng</label>
                          <input
                            type="text"
                            id="spec-weight"
                            name="specifications[weight]"
                            class="form-control"
                            placeholder="VD: 155g"
                          />
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Bảo hành</label>
                          <input
                            type="text"
                            id="spec-warranty"
                            name="specifications[warranty]"
                            class="form-control"
                            placeholder="VD: 24 tháng"
                          />
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="card">
                  <div class="card-body">
                    <div
                      class="d-flex justify-content-between align-items-center mb-7"
                    >
                      <h4 class="card-title mb-0">Variants</h4>
                      <div class="d-flex flex-row justify-content-between align-items-center gap-2">
                        <div class="d-flex align-items-center gap-1"><button type="button" class="" onclick="fillVariantsFromAI()" style="border: none; outline: none; background: none; text-decoration:underline;">Tạo biến thể AI</button><div class="loading_effect-3"></div></div>
                        <button
                          type="button"
                          class="btn btn-primary btn-sm"
                          id="add-variant-btn"
                        >
                          <i class="ti ti-plus me-1"></i>Thêm variant
                        </button>
                      </div>
                    </div>

                    <div id="variants-container">
                      <!-- Variants sẽ được thêm vào đây -->
                      <p
                        class="text-muted text-center py-4"
                        id="no-variants-message"
                      >
                        Chưa có variant nào. Nhấn "Thêm variant" để bắt đầu.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Template cho variant form (ẩn) -->
                <template id="variant-template">
                  <div class="card mb-3 variant-item" data-variant-index="">
                    <div class="card-body">
                      <div
                        class="d-flex justify-content-between align-items-center mb-4"
                      >
                        <h5 class="mb-0">
                          Variant <span class="variant-number"></span>
                        </h5>
                        <button
                          type="button"
                          class="btn btn-sm btn-outline-danger remove-variant-btn"
                        >
                          <i class="ti ti-trash me-1"></i>Xóa
                        </button>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label class="form-label">
                            Giá <span class="text-danger">*</span>
                          </label>
                          <input
                            type="number"
                            class="form-control variant-price"
                            placeholder="Nhập giá"
                            min="0"
                            step="0.01"
                            required
                          />
                        </div>
                        <div class="col-md-6 mb-3">
                          <label class="form-label">
                            Số lượng <span class="text-danger">*</span>
                          </label>
                          <input
                            type="number"
                            class="form-control variant-quantity"
                            placeholder="Số lượng"
                            min="0"
                            required
                          />
                        </div>
                        <div class="col-md-6 mb-3">
                          <label class="form-label">Màu sắc <span class="text-danger">*</span></label>
                          <select class="form-select variant-colors" name="colors" required>
                            <option value="">-- Chọn màu sắc --</option>
                            <option value="Đen">Đen</option>
                            <option value="Trắng">Trắng</option>
                            <option value="Vàng">Vàng</option>
                            <option value="Vàng Hồng">Vàng Hồng</option>
                            <option value="Bạc">Bạc</option>
                            <option value="Vàng 18K">Vàng 18K</option>
                            <option value="Vàng 14K">Vàng 14K</option>
                            <option value="Xanh Dương">Xanh Dương</option>
                            <option value="Xanh Lá">Xanh Lá</option>
                            <option value="Xám">Xám</option>
                            <option value="Nâu">Nâu</option>
                            <option value="Đỏ">Đỏ</option>
                            <option value="Hồng">Hồng</option>
                            <option value="Tím">Tím</option>
                            <option value="Cam">Cam</option>
                            <option value="Đồng">Đồng</option>
                            <option value="Bạch Kim">Bạch Kim</option>
                            <option value="Hợp kim">Hợp kim</option>
                            <option value="Titan">Titan</option>
                            <option value="Thép không gỉ">Thép không gỉ</option>
                          </select>
                        </div>
                        <div class="col-md-6 mb-3">
                          <label class="form-label">SKU</label>
                          <input
                            type="text"
                            class="form-control variant-sku"
                            placeholder="Mã SKU (tự động hoặc nhập thủ công)"
                          />
                        </div>
                        <div class="col-md-12 mb-3">
                          <label class="form-label">Ảnh variant</label>
                          <input
                            type="file"
                            class="form-control variant-image-input"
                            accept="image/*"
                          />
                          <div class="variant-image-preview mt-2" style="display: none;">
                            <img src="" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 4px;" />
                            <button type="button" class="btn btn-sm btn-danger mt-2 variant-image-remove">Xóa ảnh</button>
                          </div>
                          <input type="hidden" class="variant-image" />
                        </div>
                      </div>
                    </div>
                  </div>
                </template>
                <div class="form-actions mb-5">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    id="submit-product-btn"
                    form="product-form"
                  >
                    Lưu thay đổi
                  </button>
                  <button
                    type="button"
                    class="btn bg-danger-subtle text-danger ms-6"
                    onclick="window.location.href='/src/pages/admin/product-list.html'"
                  >
                    Hủy
                  </button>
                </div>
              </div>
              <div class="col-lg-4">
                <div
                  class="offcanvas-md offcanvas-end overflow-auto"
                  tabindex="-1"
                  id="offcanvasRight"
                  aria-labelledby="offcanvasRightLabel"
                >
                  <div class="card">
                    <div class="card-body">
                      <div
                        class="d-flex align-items-center justify-content-between mb-7"
                      >
                        <h4 class="card-title">Trạng thái</h4>
                        <div
                          class="p-2 h-100 bg-success rounded-circle"
                          id="status-indicator"
                        ></div>
                      </div>
                      <form action="" class="form-horizontal">
                        <div>
                          <select
                            class="form-select mr-sm-2 mb-2"
                            id="product-status"
                            name="status"
                          >
                            <option value="1" selected>Còn hàng</option>
                            <option value="0">Hết hàng</option>
                          </select>
                          <p class="fs-2 mb-0">Đặt trạng thái sản phẩm.</p>
                        </div>
                      </form>
                    </div>
                  </div>
                  <div class="card">
                    <div class="card-body">
                      <h4 class="card-title mb-7">Chi tiết sản phẩm</h4>
                      <div class="mb-3">
                        <label class="form-label"
                          >Danh mục <span class="text-danger">*</span></label
                        >
                        <select
                          class="form-select"
                          id="product-category"
                          name="category_id"
                          required
                        >
                          <option value="">-- Chọn danh mục --</option>
                        </select>
                        <p class="fs-2 mb-0">Chọn danh mục cho sản phẩm.</p>
                      </div>
                      <div class="mb-3">
                        <label class="form-label"
                          >Thương hiệu <span class="text-danger">*</span></label
                        >
                        <select
                          class="form-select"
                          id="product-brand"
                          name="brand_id"
                          required
                        >
                          <option value="">-- Chọn thương hiệu --</option>
                        </select>
                        <p class="fs-2 mb-0">Chọn thương hiệu cho sản phẩm.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End MAIN CONTENT -->
      </div>
    </div>

    <!-- Footer - Được inject bởi main.js -->
    <div id="admin_footer">
      <!-- AdminFooter component sẽ được inject vào đây -->
    </div>

    <!-- ============================================================== -->
    <!-- SCRIPTS - Giữ nguyên phần này cho tất cả các trang -->
    <!-- ============================================================== -->
    <div class="dark-transparent sidebartoggler"></div>
    <script src="/src/modules/admin/styles/js/vendor.min.js"></script>
    <script type="module" src="/src/modules/admin/js/main.js"></script>
    <script src="/src/modules/admin/styles/js/bootstrap.bundle.min.js"></script>
    <script src="/src/modules/admin/styles/js/simplebar.min.js"></script>
    <script src="/src/modules/admin/styles/js/app.init.js"></script>
    <script src="/src/modules/admin/styles/js/theme.js"></script>
    <script src="/src/modules/admin/styles/js/app.min.js"></script>
    <script src="/src/modules/admin/styles/js/sidebarmenu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>

    <!-- Page-specific scripts -->
    <script src="/src/modules/admin/styles/js/quill.min.js"></script>
    <script src="/src/modules/admin/styles/js/forms/quill-init.js"></script>
    <script src="/src/modules/admin/styles/js/dropzone.min.js"></script>
    <script src="/src/modules/admin/styles/js/select2.full.min.js"></script>
    <script src="/src/modules/admin/styles/js/select2.min.js"></script>
    <script src="/src/modules/admin/styles/js/forms/select2.init.js"></script>
    <script src="/src/modules/admin/styles/js/jquery.repeater.min.js"></script>
    <script src="/src/modules/admin/styles/js/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="/src/modules/admin/styles/js/forms/repeater-init.js"></script>
    <script type="module" src="/src/modules/admin/js/product-add.js"></script>
  </body>
</html>
